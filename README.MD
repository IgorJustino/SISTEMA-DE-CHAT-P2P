# Sistema de Chat P2P em Rede Local

Este repositÃ³rio contÃ©m a implementaÃ§Ã£o do **Tracker** e do **Cliente Peer** para um sistema de chat P2P em rede local. O tracker central Ã© responsÃ¡vel pela autenticaÃ§Ã£o de usuÃ¡rios, registro de peers e de arquivos compartilhados. Os peers se comunicam diretamente entre si para troca de mensagens e transferÃªncia de arquivos.

---

## Estrutura de DiretÃ³rios

```
P2P_Redes/
â”œâ”€â”€ tracker/
â”‚   â”œâ”€â”€ tracker.py        # CÃ³digo do servidor tracker
â”‚   â”œâ”€â”€ users.json        # Banco de usuÃ¡rios (hash das senhas)
â”‚   â”œâ”€â”€ peers.json        # Registro de peers conectados e seus arquivos
â”‚   â””â”€â”€ test_client.py    # Script de testes (register, login, register_files, list_peers, logout)
â””â”€â”€ peer/                 # (Em futuras etapas) Cliente peer para chat e troca de arquivos
```

---

## PrÃ©-requisitos

* Python 3.8+ instalado
* Biblioteca `cryptography` (se usar RSA) ou `PyNaCl` (se usar ECC)

Instale dependÃªncias com:

```bash
pip install cryptography
# ou
pip install pynacl
```

---

## ðŸš€ Como Executar

### 1. Iniciar o Tracker

No terminal, dentro da pasta `tracker/`, execute:

```bash
python3 tracker.py
```

O tracker ficarÃ¡ escutando em `0.0.0.0:8000`.

### 2. Rodar o Script de Testes

Em outro terminal, ainda em `tracker/`, execute:

```bash
python3 test_client.py
```

O script irÃ¡ realizar, em sequÃªncia:

1. **REGISTER**: cria um novo usuÃ¡rio
2. **LOGIN**: faz login desse usuÃ¡rio
3. **REGISTER\_FILES**: registra uma lista de arquivos do peer
4. **LIST\_PEERS**: lista peers ativos e seus arquivos
5. **LOGOUT**: faz logout do peer
6. **LIST\_PEERS**: verifica que a lista ficou vazia apÃ³s logout

VocÃª verÃ¡ no terminal as respostas do tracker em formato JSON.

---

## ðŸ“‹ Comandos Suportados

O tracker entende mensagens JSON via socket TCP na porta 8000. Formato geral:

```json
{ "action": "COMANDO", /* parÃ¢metros */ }
```

| Comando          | ParÃ¢metros                                                    | DescriÃ§Ã£o                                  |
| ---------------- | ------------------------------------------------------------- | ------------------------------------------ |
| `REGISTER`       | `user`, `password`                                            | Registra um novo usuÃ¡rio                   |
| `LOGIN`          | `user`, `password`                                            | Autentica o usuÃ¡rio                        |
| `REGISTER_FILES` | `user`, `files` (lista de objetos com `name`, `size`, `hash`) | Registra arquivos compartilhados pelo peer |
| `LIST_PEERS`     | *(sem parÃ¢metros)*                                            | Retorna peers ativos e seus arquivos       |
| `LOGOUT`         | `user`                                                        | Desconecta o peer e remove do registro     |

---

## Exemplo de Mensagens

**LOGIN**

```json
{ "action": "LOGIN", "user": "igor", "password": "12345" }
```

**REGISTER\_FILES**

```json
{
  "action": "REGISTER_FILES",
  "user": "igor",
  "files": [
    { "name": "video.mp4", "size": 1024000, "hash": "abc123" },
    { "name": "foto.jpg",  "size":   50000, "hash": "def456" }
  ]
}
```

---

## ðŸ“„ peers.json

Exemplo de conteÃºdo de `peers.json` apÃ³s registro de arquivos:

```json
{
  "igor": {
    "connection": {
      "ip": "127.0.0.1",
      "porta": 37562,
      "login_time": "2025-05-26T08:41:10.491540"
    },
    "files": [
      { "name": "video.mp4", "size": 1024000, "hash": "abc123" },
      { "name": "foto.jpg",  "size":   50000, "hash": "def456" }
    ]
  }
}
```



